# =============================================================================
# Verinode Backend — Environment Variable Reference
# =============================================================================
# Copy this file to .env and fill in the values for your environment.
# DO NOT commit .env to version control.
#
# Environment-specific overrides are loaded automatically in this order:
#   .env.{NODE_ENV}.local  (highest priority, never commit)
#   .env.{NODE_ENV}
#   .env.local
#   .env                   (this file's copy)
# =============================================================================

# ── Server ────────────────────────────────────────────────────────────────────
PORT=3001
HOST=0.0.0.0
NODE_ENV=development                 # development | production | test | staging
API_PREFIX=/api
REQUEST_SIZE_LIMIT=10mb
SHUTDOWN_TIMEOUT_MS=5000

# ── Database ──────────────────────────────────────────────────────────────────
MONGODB_URI=mongodb://localhost:27017/verinode
DB_MAX_POOL_SIZE=10
DB_CONNECT_TIMEOUT_MS=30000
DB_SOCKET_TIMEOUT_MS=45000

# ── Authentication ────────────────────────────────────────────────────────────
# REQUIRED in production. Must be ≥ 32 characters.
JWT_SECRET=change-me-before-going-to-production-must-be-32-chars-min
JWT_EXPIRES_IN=24h
JWT_ISSUER=verinode
JWT_AUDIENCE=verinode-users
BCRYPT_ROUNDS=12
SESSION_SECRET=change-me-session-secret

# ── Stellar / Blockchain ──────────────────────────────────────────────────────
STELLAR_NETWORK=testnet              # testnet | mainnet
STELLAR_SECRET_KEY=                  # Your Stellar account secret key (Sxxx...)
# Optional override — derived from STELLAR_NETWORK if not set
# STELLAR_HORIZON_URL=https://horizon-testnet.stellar.org

# ── Cross-chain / EVM (only needed when FEATURE_CROSS_CHAIN=true) ─────────────
ETHEREUM_RPC_URL=https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
ETHEREUM_BRIDGE_ADDRESS=
POLYGON_RPC_URL=https://polygon-rpc.com
POLYGON_BRIDGE_ADDRESS=
BSC_RPC_URL=https://bsc-dataseed1.binance.org
BSC_BRIDGE_ADDRESS=

# ── Redis / Cache ─────────────────────────────────────────────────────────────
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=                      # Leave blank for no auth (dev only)
REDIS_DB=0
REDIS_DEFAULT_TTL=3600               # Default TTL in seconds

# ── IPFS ──────────────────────────────────────────────────────────────────────
IPFS_HOST=localhost
IPFS_PORT=5001
IPFS_PROTOCOL=http
IPFS_REPO=./ipfs-repo
IPFS_GATEWAY_HOST=0.0.0.0
IPFS_GATEWAY_PORT=8080

# ── Pinning Services (at least one recommended for production) ────────────────
# Pinata
PINATA_API_KEY=
PINATA_SECRET_API_KEY=
PINATA_ENDPOINT=https://api.pinata.cloud
PINATA_TIMEOUT=30000

# Infura IPFS
INFURA_PROJECT_ID=
INFURA_PROJECT_SECRET=
INFURA_IPFS_ENDPOINT=https://ipfs.infura.io:5001
INFURA_TIMEOUT=30000

# Filebase
FILEBASE_ACCESS_KEY=
FILEBASE_SECRET_KEY=
FILEBASE_BUCKET=verinode-backup
FILEBASE_ENDPOINT=https://s3.filebase.com
FILEBASE_TIMEOUT=30000

# Pinning retry settings
PINNING_MAX_RETRIES=3
PINNING_RETRY_DELAY=5000

# ── Frontend / URLs ───────────────────────────────────────────────────────────
FRONTEND_URL=http://localhost:3000
API_URL=http://localhost:3001
# Comma-separated list of allowed CORS origins (required in production)
ALLOWED_ORIGINS=http://localhost:3000

# ── Logging ───────────────────────────────────────────────────────────────────
LOG_LEVEL=info                       # error | warn | info | debug
LOG_TO_FILE=false
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=5

# ── Media / Signing ───────────────────────────────────────────────────────────
MEDIA_SIGNING_KEY=                   # Private key for media signing
MEDIA_VERIFICATION_PUBLIC_KEY=       # Public key for media verification

# ── Webhooks / Alerts ─────────────────────────────────────────────────────────
SLACK_WEBHOOK_URL=
SECURITY_WEBHOOK_URL=
WEBHOOK_AUTH_TOKEN=
ADMIN_EMAIL=

# =============================================================================
# Feature Flags
# Set to "true" to enable, any other value (or absent) disables.
# =============================================================================

# ── Core features ─────────────────────────────────────────────────────────────
FEATURE_AI_VALIDATION=false          # AI/ML proof validation (requires ML service)
FEATURE_IPFS_STORAGE=true            # Store proofs on IPFS
FEATURE_CROSS_CHAIN=false            # Cross-chain bridge (Ethereum/Polygon/BSC)
FEATURE_ZK_PROOFS=false              # Zero-knowledge proof privacy

# ── User-facing features ──────────────────────────────────────────────────────
FEATURE_MARKETPLACE=true             # Proof marketplace
FEATURE_SOCIAL_SHARING=true          # Social sharing of proofs
FEATURE_GAMIFICATION=false           # Points, achievements, leaderboards
FEATURE_COMPLIANCE=true              # GDPR/SOC2 compliance reporting
FEATURE_TEAM_ANALYTICS=true          # Team analytics dashboard

# ── Infrastructure features ───────────────────────────────────────────────────
FEATURE_RESPONSE_CACHE=true          # Redis response caching
FEATURE_PROOF_EXPIRATION=false       # Proof TTL / expiration
FEATURE_BATCH_OPERATIONS=true        # Batch proof operations
FEATURE_REAL_TIME_STATS=false        # Real-time stats (WebSocket/SSE)

# ── Security features ─────────────────────────────────────────────────────────
FEATURE_RATE_LIMITING=true           # Rate limit enforcement
FEATURE_MEDIA_AUTHENTICITY=false     # Video/image fingerprinting
FEATURE_VOICE_BIOMETRICS=false       # Voice identity verification

# ── Developer / debug flags ───────────────────────────────────────────────────
FEATURE_CONFIG_ENDPOINT=false        # Expose GET /api/config (dev only)
FEATURE_VERBOSE_LOGGING=false        # Verbose request/response logging
